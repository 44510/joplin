exports.default=function(t){var e={};function n(o){if(e[o])return e[o].exports;var s=e[o]={i:o,l:!1,exports:{}};return t[o].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(o,s,function(e){return t[e]}.bind(null,s));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){const o=n(1);function s(t,e){var n=[];const o=e.todo,s=Object.assign(new t.Token("checkbox_input","input",0),{attrs:[["type","checkbox"]]});o.isCompleted()&&s.attrs.push(["checked","checked"]),n=n.concat([Object.assign(new t.Token("label_open","label",1),{attrs:[["class","todo-checkbox"]]}),s,Object.assign(new t.Token("span_open","span",1),{attrs:[["class","todo-checkmark"]]}),new t.Token("span_close","span",-1),new t.Token("label_close","label",-1)]);const r=o.getPriority("~");var i=["A","B","C","D","E","~"];!1===i.includes(r)&&(i=["A","B","C","D","E",r,"~"]),n.push(Object.assign(new t.Token("div_open","div",1),{attrs:[["class","todo-priority"]]})),n.push(Object.assign(new t.Token("select_open","select",1),{attrs:[["name","priority"]]})),i.forEach((function(e){let o=new t.Token("option_open","option",1);o.attrs=[["value",e]],r==e&&o.attrs.push(["selected","selected"]),n.push(o),n.push(Object.assign(new t.Token("html_inline","",0),{content:e})),n.push(new t.Token("option_close","option",-1))})),n.push(new t.Token("select_close","select",-1)),n.push(new t.Token("div_close","div",-1));var c="";const l=o.getBodyTokens();for(var u=0;u<l.length;u++){const t=l[u];switch(t.type){case"project":c+=` <span class="todo-project">${t.content}</span>`;break;case"context":c+=` <span class="todo-context">${t.content}</span>`;break;case"meta":c+=` <span class="todo-meta">${t.content}</span>`;break;default:c=c+" "+t.content}}return n.push(Object.assign(new t.Token("inline","",0),{content:c,children:[]})),n.push(Object.assign(new t.Token("span_open","span",1),{attrs:[["class","todo-panel"]]})),c=`<span class="todo-completion">${o.getCompletionDate()||" "}</span> `,c+=`<span class="todo-creation">${o.getCreationDate()||" "}</span> `,c+='<a class="todo-select" href="#">Select</a>',n.push(Object.assign(new t.Token("inline","",0),{content:c,children:[]})),n.push(new t.Token("span_close","span",-1)),n}function r(t,e,n,r){var i=t.tokens;for(let e=0;e<i.length;e++){const n=i[e];if("fence"!==n.type)continue;if(n.info.length<7)continue;const r=n.info.trim().split(" "),h=r.shift();if("todotxt"!==h&&"archive-todotxt"!==h)continue;const d=n.map[0];for(var c=[],l=[],u=0;u<r.length;u++){const t=r[u].split(":");switch(t.shift()){case"sort":if(t.length<1||t[0].length<1)continue;c.push(t);break;case"filter":if(t.length<1||t[0].length<1)continue;var a=[t.shift()];if(t.length<1||t[0].length<1)continue;a.push(t.shift().split(",")),t.length>0&&a.push(t.shift()),l.push(a)}}const f=n.content.split("\n");f[f.length-1].search("```")>=0&&f.pop();const g=o.parse(f.join("\n")).getTodoView(),_=g.filter(l,!0).sort(c),k=_.getCountedProjects(),y=_.getCountedContexts();todoTokens=[],todoTokens.push(Object.assign(new t.Token("bullet_list_open","ul",1),{block:!0,attrs:[["class","todotxt"]]}));var p=`<b>Sort</b>: ${c.join(" ")} <b>Filter</b>: ${l.join(" ")} <b>Show</b>: ${_.count("notcompleted")}/${g.count("notcompleted")} OPEN ${_.count()}/${g.count()} ALL `;p+="<b>Projects</b>: ",Object.keys(k).sort().forEach(t=>{p+=`<span class="todo-project">${t}</span><span class="todo-count">${k[t]}</span> `}),p+="<b>Contexts</b>: ",Object.keys(y).sort().forEach(t=>{p+=`<span class="todo-context">${t}</span><span class="todo-count">${y[t]}</span> `}),todoTokens.push(Object.assign(new t.Token("list_item_open","li",1),{block:!0,attrs:[["class","todotxt-header"]]})),todoTokens.push(Object.assign(new t.Token("inline","",0),{content:p,children:[]})),todoTokens.push(Object.assign(new t.Token("list_item_open","li",-1),{block:!0}));const m=_.getList();for(u=0;u<m.length;u++){const e=m[u],n=d+1+e.lineIdx,o="prior-"+e.todo.getPriority("null");todoTokens.push(Object.assign(new t.Token("list_item_open","li",1),{block:!0,attrs:[["class","todo "+o],["data-lineIdx",n]]})),todoTokens=todoTokens.concat(s(t,e)),todoTokens.push(Object.assign(new t.Token("list_item_open","li",-1),{block:!0}))}todoTokens.push(Object.assign(new t.Token("bullet_list_close","ul",-1),{block:!0})),i=i.slice(0,e).concat(todoTokens,i.slice(e+1)),e=e+todoTokens.length-1}t.tokens=i}t.exports={default:function(t){return{plugin:function(e,n){t.pluginId;e.core.ruler.after("block","todoTxt",r)},assets:function(){return[{name:"todoTxtMdView.js"},{name:"todoTxtMdView.css"}]}}}}},function(t,e,n){var o;o=function(){return(()=>{"use strict";var t={283:t=>{function e(t){switch(t){case 9:case 32:return!0}return!1}function n(t){this.tokens_=[];for(var o=0,s=t.length-1;o<t.length&&e(t.charCodeAt(o));o++);for(;s>=0&&e(t.charCodeAt(s));s--);const r=t.substr(o,s-o+1);this.tokens_.push({type:"leadingSpace",content:t.substr(0,o)});const i=r.split(" ");i.length>0&&"x"==i[0]?this.tokens_.push({type:"status",content:i.shift()}):this.tokens_.push({type:"status",content:null}),i.length>0&&3==i[0].length&&40==i[0].charCodeAt(0)&&41==i[0].charCodeAt(2)&&i[0].charCodeAt(1)>=65&&i[0].charCodeAt(1)<=90?this.tokens_.push({type:"priority",content:i.shift()}):this.tokens_.push({type:"priority",content:null}),i.length>0&&n.isIsoDate(i[0])?(i.length>1&&n.isIsoDate(i[1])?this.tokens_.push({type:"completionDate",content:i.shift()}):this.tokens_.push({type:"completionDate",content:null}),this.tokens_.push({type:"creationDate",content:i.shift()})):(this.tokens_.push({type:"completionDate",content:null}),this.tokens_.push({type:"creationDate",content:null}));for(let t=0;t<i.length;t++){const e=i[t];e.length>1&&43==e.charCodeAt(0)&&43!=e.charCodeAt(1)?this.tokens_.push({type:"project",content:e}):e.length>1&&64==e.charCodeAt(0)&&64!=e.charCodeAt(1)?this.tokens_.push({type:"context",content:e}):e.length>2&&e.charCodeAt(0)>=65&&e.charCodeAt(0)<=122&&e.indexOf(":")>=0&&e.indexOf(":")!=e.length-1&&0==!!e.split(":")[0].match(/[^a-zA-Z0-9]/)?this.tokens_.push({type:"meta",content:e}):this.tokens_.push({type:"text",content:e})}this.tokens_.push({type:"trailingSpace",content:t.substr(s+1,t.length)})}n.isIsoDate=function(t){return 10==t.length&&(45==t.charCodeAt(4)||45==t.charCodeAt(7))&&!isNaN(Date.parse(t))},n.prototype.toString=function(){return this.tokens_[0].content+this.tokens_.slice(1,-1).filter(t=>t.content).map(t=>t.content).join(" ")+this.tokens_[this.tokens_.length-1].content},n.prototype.getStatus=function(t=null){return this.tokens_[1].content?this.tokens_[1].content:t},n.prototype.isCompleted=function(){return!!this.tokens_[1].content},n.prototype.setCompleted=function(){this.tokens_[1].content="x"},n.prototype.unsetCompleted=function(){this.tokens_[1].content=null},n.prototype.getPriority=function(t=null){return this.tokens_[2].content?this.tokens_[2].content.charAt(1):t},n.prototype.setPriority=function(t=null){if(t){if(t.length>1)return;const e=t.charCodeAt(0);if(e<65||e>90)return;this.tokens_[2].content="("+t+")"}else this.tokens_[2].content=null},n.prototype.getCompletionDate=function(t=null){return t=t&&n.isIsoDate(t)?t:null,this.tokens_[3].content?this.tokens_[3].content:t},n.prototype.setCompletionDate=function(t){null!==t?n.isIsoDate(t)&&(this.tokens_[3].content=t,this.tokens_[4].content=this.tokens_[4].content||t):this.tokens_[3].content=null},n.prototype.getCreationDate=function(t=null){return t=t&&n.isIsoDate(t)?t:null,this.tokens_[4].content?this.tokens_[4].content:t},n.prototype.setCreationDate=function(t){if(null===t)return this.tokens_[3].content=null,void(this.tokens_[4].content=null);n.isIsoDate(t)&&(this.tokens_[4].content=t)},n.prototype.getProjects=function(){const t=[];for(let e=5;e<this.tokens_.length-1;e++){const n=this.tokens_[e];"project"==n.type&&t.push(n.content)}return t},n.prototype.getContexts=function(){const t=[];for(let e=5;e<this.tokens_.length-1;e++){const n=this.tokens_[e];"context"==n.type&&t.push(n.content)}return t},n.prototype.getMetadata=function(){var t={};for(let e=5;e<this.tokens_.length-1;e++){const n=this.tokens_[e];if("meta"==n.type){const e=n.content.split(":");e[0]in t?t[e[0]].push(e[1]):t[e[0]]=[e[1]]}}return t},n.prototype.getMeta=function(t){var e=[];for(let n=5;n<this.tokens_.length-1;n++){const o=this.tokens_[n];"meta"==o.type&&o.content.split(":")[0]==t&&e.push(o.content.slice(t.length+1))}return e},n.prototype.getTokens=function(){return this.tokens_},n.prototype.getHeadTokens=function(){return this.tokens_.slice(1,5)},n.prototype.getBodyTokens=function(){return this.tokens_.slice(5,this.tokens_.length-1)},n.prototype.trim=function(){return this.tokens_[0].content="",this.tokens_[this.tokens_.length-1].content="",this},t.exports=n},718:(t,e,n)=>{var o=n(283),s=n(814);function r(t){this.raw_=t,this.list_=[],this.deleted_=[];const e=t.split("\n");for(let t=0;t<e.length;t++){const n=e[t],s=n.trim().length>0?new o(n):null;this.list_.push({lineIdx:t,raw:n,todo:s})}}r.parse=function(t){return new r(t)},r.parseLine=function(t){return t.trim().length>0?new o(t):null},r.isIsoDate=function(t){return o.isIsoDate(t)},r.prototype.toString=function(){return this.list_.map(t=>t.todo?t.todo.toString():t.raw).join("\n")},r.prototype.getList=function(){return this.list_},r.prototype.getDeleted=function(){return this.deleted_},r.prototype.getTodos=function(){return this.list_.filter(t=>t.todo).map(t=>t.todo)},r.prototype.getTodoView=function(){return new s(this.list_.filter(t=>t.todo),this)},r.prototype.trim=function(){return this.getTodos().forEach(t=>t.trim()),this.deleted_=this.deleted_.concat(this.list_.filter(t=>null==t.todo)),this.list_=this.list_.filter(t=>t.todo),this},r.prototype.delete=function(t){const e=this.list_.indexOf(t);return e>=0&&(this.list_.splice(e,1),this.deleted_.push(t)),this},t.exports=r},814:t=>{var e={default:{},status:{nullValue:"o",order:"asc"},priority:{nullValue:"~",order:"desc"},creationDate:{nullValue:"1970-01-01",order:"desc"},completionDate:{nullValue:"1970-01-01",order:"desc"},"meta-due":{nullValue:"9999-12-31",order:"asc"}},n={status:{nullValue:"o"},priority:{nullValue:"~"},project:{nullValue:"+null"},context:{nullValue:"@null"},"meta-due":{nullValue:"null"}};function o(t,e,n){return n.indexOf(t)===e}function s(t){const e=t[0],n="asc"==t[1]?1:-1,o=t[2];if("meta-"==e.slice(0,5)){var s=e.slice(5);return function(t,e){var r=t.todo.getMeta(s)[0]||o,i=e.todo.getMeta(s)[0]||o;return console.log(e.todo.getMeta(s)),r>i?1*n:r<i?-1*n:0}}switch(e){case"status":return function(t,e){return n*(t.todo.getStatus(o).charCodeAt(0)-e.todo.getStatus(o).charCodeAt(0))};case"priority":return function(t,e){return n*(e.todo.getPriority(o).charCodeAt(0)-t.todo.getPriority(o).charCodeAt(0))};case"creationDate":return function(t,e){return n*(Date.parse(t.todo.getCreationDate(o))-Date.parse(e.todo.getCreationDate(o)))};case"completionDate":return function(t,e){return n*(Date.parse(t.todo.getCompletionDate(o))-Date.parse(e.todo.getCompletionDate(o)))}}}function r(t,e){const n=t[0];var o=t[1];const s=t[2];if("meta-"==n.slice(0,5)){var r=n.slice(5);return function(t){const n=t.todo.getMeta(r);return n.length<1&&n.push(s),e?(o=o.map(t=>t.toLowerCase()),n.map(t=>t.toLowerCase()).some(t=>o.includes(t))):n.some(t=>o.includes(t))}}switch(n){case"status":return function(t){return o.includes(t.todo.getStatus(s))};case"priority":return function(t){return o.includes(t.todo.getPriority(s))};case"project":return function(t){const n=t.todo.getProjects();return n.length<1&&n.push(s),o=o.map(t=>43==t.charCodeAt(0)?t:"+"+t),e?(o=o.map(t=>t.toLowerCase()),n.map(t=>t.toLowerCase()).some(t=>o.includes(t))):n.some(t=>o.includes(t))};case"context":return function(t){const n=t.todo.getContexts();return n.length<1&&n.push(s),o=o.map(t=>64==t.charCodeAt(0)?t:"@"+t),e?(o=o.map(t=>t.toLowerCase()),n.map(t=>t.toLowerCase()).some(t=>o.includes(t))):n.some(t=>o.includes(t))}}}function i(t,e){this.list_=t,this.todoTxt_=e}i.prototype.toString=function(){return this.list_.map(t=>t.todo?t.lineIdx+": "+t.todo.toString():t.lineIdx+": "+t.raw).join("\n")},i.prototype.getList=function(){return this.list_},i.prototype.sort=function(t){for(var n=[],o=0;o<t.length;o++){const s=t[o];if(s.length<1||"meta-"!=s[0].slice(0,5)&&s[0]in e==0)continue;const i=s[0];if("default"!=i){var r=i in e?e[i].order:"asc",c=i in e?e[i].nullValue:"0";s.length>1&&["desc","asc"].includes(s[1])&&(r=s[1]),s.length>2&&(c=s[2]),(n=n.filter(t=>t[0]!==i)).push([i,r,c])}else(n=n.filter(t=>"priority"!==t[0]&&"status"!==t[0])).push(["priority",e.priority.order,e.priority.nullValue]),n.push(["status",e.status.order,e.status.nullValue])}var l=this.list_;for(o=0;o<n.length;o++)l=l.sort(s(n[o]));return new i(l,this.todoTxt_)},i.prototype.filter=function(t,e=!1){for(var o=[],s=0;s<t.length;s++){const e=t[s];if(!(e.length<2||"meta-"!=e[0].slice(0,5)&&e[0]in n==0||e[1].length<1)){var c=e[0]in n?n[e[0]].nullValue:"null";e.length>2&&(c=e[2]),o.push([e[0],e[1],c])}}var l=this.list_;for(s=0;s<o.length;s++)l=l.filter(r(o[s],e));return new i(l,this.todoTxt_)},i.prototype.count=function(t="all"){switch(t.toLowerCase()){case"completed":return this.list_.filter(t=>t.todo.isCompleted()).length;case"notcompleted":return this.list_.filter(t=>!1===t.todo.isCompleted()).length;default:return this.list_.length}},i.prototype.getCountedProjects=function(){return this.list_.reduce((t,e)=>t.concat(e.todo.getProjects().filter(o)),[]).reduce((t,e)=>(t[e]=1+(0|t[e]),t),{})},i.prototype.getCountedContexts=function(){return this.list_.reduce((t,e)=>t.concat(e.todo.getContexts().filter(o)),[]).reduce((t,e)=>(t[e]=1+(0|t[e]),t),{})},t.exports=i}},e={};return function n(o){var s=e[o];if(void 0!==s)return s.exports;var r=e[o]={exports:{}};return t[o](r,r.exports,n),r.exports}(718)})()},t.exports=o()}]).default;